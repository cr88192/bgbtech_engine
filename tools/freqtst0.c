#include <stdio.h>
#include <math.h>

#ifndef M_PI
#define M_PI 3.1415926535897932384626433832795
#endif

typedef unsigned char byte;

byte freqtab[256];

int main()
{
	float f, g;
	int p0, p1, p2, p3;
	int q0, q1, q2, q3;
	int i, j, k;

#if 0
	for(i=0; i<256; i++)
	{
		f=2*M_PI*(i/255.0);
		p0=1.9*(cos(0.00*f)+1.0);
		p1=1.9*(cos(0.25*f)+1.0);
		p2=1.9*(cos(0.50*f)+1.0);
		p3=1.9*(cos(0.75*f)+1.0);
		freqtab[i]=p0+(p1*4)+(p1*16)+(p3*64);
	}
#endif
	for(i=0; i<256; i++)
	{
		p0=(i>>0)&3; p1=(i>>2)&3;
		p2=(i>>4)&3; p3=(i>>6)&3;
		
		q0=(p0+p1+p2+p3)/4;
//		q1=2+(p0-p1+p2-p3)/2;
//		q2=2+(p0+p1-p2-p3)/2;
//		q3=2+(p0-p1-p2+p3)/2;
//		q1=(p0-p1+p2-p3)&3;
//		q2=(p0+p1-p2-p3)&3;
//		q3=(p0-p1-p2+p3)&3;

		q1=2+(p0-p1+p2-p3);
		q2=2+(p0+p1-p2-p3);
		q3=2+(p0-p1-p2+p3);

		q0=(q0<0)?0:((q0>255)?255:q0);
		q1=(q1<0)?0:((q1>255)?255:q1);
		q2=(q2<0)?0:((q2>255)?255:q2);
		q3=(q3<0)?0:((q3>255)?255:q3);

		j=(q0<<6)|(q1<<4)|(q2<<2)|q3;
		k=(p0<<6)|(p1<<4)|(p2<<2)|p3;
		freqtab[j]=k;
		
		printf("%d %d %d %d\n", q0, q1, q2, q3);
	}
	
	for(i=0; i<16; i++)
	{
		for(j=0; j<16; j++)
		{
			printf("%02X ", freqtab[i*16+j]);
		}
		printf("\n");
	}
	printf("\n");

	for(i=0; i<256; i++)
	{
		p0=(i>>0)&3; p1=(i>>2)&3;
		p2=(i>>4)&3; p3=(i>>6)&3;
		
//		q0-=2;		q1-=2;
//		q2-=2;		q3-=2;
	
		q0=(p0+p1+p2+p3)/4;
//		q1=2+(p0-p1+p2-p3)/2;
//		q2=2+(p0+p1-p2-p3)/2;
//		q3=2+(p0-p1-p2+p3)/2;

		q1=2+(p0-p1+p2-p3);
		q2=2+(p0+p1-p2-p3);
		q3=2+(p0-p1-p2+p3);

		q0=(q0<0)?0:((q0>255)?255:q0);
		q1=(q1<0)?0:((q1>255)?255:q1);
		q2=(q2<0)?0:((q2>255)?255:q2);
		q3=(q3<0)?0:((q3>255)?255:q3);

		j=(q0<<6)|(q1<<4)|(q2<<2)|q3;
		k=freqtab[j];

		printf("%02X:%02X ", j, k);

//		f= 64*(8+q0-q1+q2-q3)/4.0;
//		f+=16*(8+q0+q1-q2-q3)/4.0;
//		f+= 1*(8+q0-q1-q2+q3)/4.0;
//		j=f;

//		printf("%02X ", j);
	
#if 0	
		k=freqtab[j];
		
		printf("%02X:%02X ", j, k);

		q0=(i>>0)&3; q1=(i>>2)&3;
		q2=(i>>4)&3; q3=(i>>6)&3;

		p0=(k>>0)&3; p1=(k>>2)&3;
		p2=(k>>4)&3; p3=(k>>6)&3;
		printf("(%d %d %d %d):(%d %d %d %d) ", q0,q1,q2,q3, p0,p1,p2,p3);
#endif
	}
}